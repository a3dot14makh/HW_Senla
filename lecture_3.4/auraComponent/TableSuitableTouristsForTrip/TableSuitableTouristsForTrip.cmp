<aura:component controller="TableSuitableTouristsForTripController"
    implements="flexipage:availableForRecordHome,force:hasRecordId" access="global">
    <aura:attribute name="recordId" type="Id" />
    <aura:attribute name="trip" type="Trip__c" />
    <aura:attribute name="tourists" type="Object[]" />
    <aura:attribute name="columns" type="List" />
    <aura:attribute name="maxRowSelection" type="Integer" default="0" />
    <aura:attribute name="showSpinner" type="Boolean" default="true" />
    <aura:attribute name="showDataTable" type="Boolean" default="false" />
    <aura:attribute name="showModals" type="Boolean" default="false" />
    <aura:attribute name="showButtonAddToTrip" type="Boolean" default="false" />

    <aura:handler name="change" value="{!v.showDataTable}" action="{!c.displayData}" />

    <force:recordData aura:id="tripRecord" recordId="{!v.recordId}" targetFields="{!v.trip}" layoutType="FULL"
        recordUpdated="{!c.doInit}" />

    <aura:if isTrue="{!v.showDataTable}">
        <lightning:card iconName="utility:list" title="{! $Label.c.Card_SuitableTourists}"
            footer="{! $Label.c.FooterCard_SuitableTourists + '  ' + v.maxRowSelection}">

            <aura:set attribute="actions">
                <aura:if isTrue="{!v.showButtonAddToTrip}">
                    <lightning:button variant="brand" label="{! $Label.c.Button_AddToTrip}"
                        onclick="{! c.handleAddTripClick }" />
                    <aura:set attribute="else">
                        <lightning:button variant="brand" disabled="true">{! $Label.c.Button_AddToTrip}
                        </lightning:button>
                    </aura:set>
                </aura:if>
            </aura:set>

            <aura:if isTrue="{!v.showSpinner}">
                <lightning:spinner variant="brand" size="small" />
            </aura:if>

            <p class="slds-clearfix slds-p-horizontal_small">
                <lightning:datatable aura:id="suitableTourists" data="{!v.tourists}" columns="{!v.columns}"
                    keyField="Id" maxRowSelection="{! v.maxRowSelection }" onrowselection="{!c.handleRowSelection}"
                    hideCheckboxColumn="false" />
            </p>
        </lightning:card>
    </aura:if>

    <aura:if isTrue="{!v.showModals}">
        <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open" aria-labelledby="modal-heading-01"
            aria-modal="true" aria-describedby="modal-content-id-1">
            <div class="slds-modal__container">
                <header class="slds-modal__header">
                    <h2 id="modal-heading-01" class="slds-modal__title slds-hyphenate">{! $Label.c.Button_AddToTrip}
                    </h2>
                </header>
                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                    <p class="slds-align_absolute-center">{! $Label.c.ModalBody_SuitableTourists}</p>
                </div>
                <footer class="slds-modal__footer">
                    <lightning:button label="{! $Label.c.Button_Cancel}" onclick="{! c.handleCancelClick }" />
                    <lightning:button variant="brand" label="{! $Label.c.Button_Save}"
                        onclick="{! c.handleSaveClick }" />
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </aura:if>

</aura:component>